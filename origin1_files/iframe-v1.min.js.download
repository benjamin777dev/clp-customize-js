!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=37)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(6);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=n(17),s=n(18),c=n(19),l={settings:{coreHost:"https://core.spreedly.com"}};function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return"".concat(e.settings.coreHost,"/api/internal/v1/transactions/").concat(t,"/status.json")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t.environmentKey&&(e["Spreedly-Environment-Key"]=t.environmentKey),e}var h=function(){function t(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:500,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l;(0,i.default)(this,t),this.endpoint=u(e,d),this.done=n,this.handleData=this.handleData.bind(this),this.handleError=this.handleError.bind(this),this.fetchData=this.fetchData.bind(this),this.retryable=new s(a,c,this.fetchData,r),this.environmentKey=o}return(0,o.default)(t,[{key:"run",value:function(){this.retryable.runNow()}},{key:"stop",value:function(){this.retryable.stop()}},{key:"fetchData",value:function(){var t=d({environmentKey:this.environmentKey}),e=(new Date).getTime();a.getJSON("".concat(this.endpoint,"?time=").concat(e),this.handleData,this.handleError,t)}},{key:"handleData",value:function(t){return!!this.retryable.isRunning()&&(t.transaction&&t.transaction.state&&"pending"!==t.transaction.state?(this.retryable.stop(),this.done(t.transaction),!0):(this.done(t.transaction),this.retryable.runLater(),!0))}},{key:"handleError",value:function(){return!!this.retryable.isRunning()&&(this.retryable.runLater(),!0)}}],[{key:"withStatus",value:function(t,e,n,r){var i=d({environmentKey:e});a.getJSON(u(t),n,r,i)}},{key:"withContext",value:function(e,n,r,i){t.withStatus(e,n,(function(t){r(c.decode(t.transaction&&t.transaction.context)||t.transaction)}),i)}},{key:"contextFrom",value:function(t){var e=null;if(t.transaction&&t.transaction.context)try{var n=window.atob(t.transaction.context);e=window.JSON.parse(n)}catch(t){}return e}}]),t}();t.exports=h},function(t,e,n){var r=n(6);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(3).default,i=n(9);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(54)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,n){"use strict";t.exports={ajax:{post:function(t,e,n){var r=new XMLHttpRequest,i=JSON.parse(e);r.onreadystatechange=function(){4===r.readyState&&n(r.status,r.responseText)},r.open("POST",t,!0),r.setRequestHeader("CONTENT-TYPE","application/json"),i&&i.environment_key&&r.setRequestHeader("Spreedly-Environment-Key",i.environment_key),r.send(e)}},addListener:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},addInputListener:function(t,e){void 0===t.oninput||null===t.oninput?(this.addListener(t,"change",e),this.addListener(t,"keyup",e)):this.addListener(t,"input",e)},removeListener:function(t,e,n){t&&(t.addEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&"string"==typeof e&&"function"==typeof n&&t.detachEvent("on"+e,n))},getElementWithAttribute:function(t,e){for(var n=document.getElementsByTagName(t),r=0;r<n.length;r++)if(n[r].getAttribute(e))return n[r]},domain:function(t){if(void 0!==t){var e=t.match(/^(https?:\/\/[^\/?#]+)(?:[\/?#]|$)/i);return e&&e[1]}},camelize:function(t){if(void 0!==t){var e=t.split("-");if(1===e.length)return t;for(var n=e[0],r=1;r<e.length;r++){var i=e[r];n=n+i.charAt(0).toUpperCase()+i.slice(1)}return n}},stripTags:function(t){if("string"==typeof t)return t.replace(/(<([^>]+)>)/gi,"")},setText:function(t,e){void 0!==t&&void 0!==e&&(t.textContent&&void 0!==t.textContent?t.textContent=e:t.innerText=e)},style:function(t,e,n){if(void 0!==e&&void 0!==n){var r=this.camelize(e.trim());this.cssProperties.includes(r)&&("fontFamily"===r?this.importFont(t,n):t.style[this.cssToJsProperty(r)]=n.trim())}},importFont:function(t,e){var n=this,r=e.split(","),i="spreedly-cvv-frame-".concat(window.name.replace("spreedly-number-frame-","")),o="cvv"===t.id?window.parent.frames[i].document:document,a=[];r.forEach((function(t){var e=n.camelize(t.trim().toLowerCase().replaceAll('"',"").replaceAll("'","").replaceAll(" ","-")),r=n.spreedlyHostedFontFamilies[e];if(r){var i="".concat("https://core.spreedly.com","/stylesheets/fonts/").concat(e);r.styles.forEach((function(t){var e=new FontFace(r.fontFamily,"url(".concat(i,"/").concat(t.file,")"),{style:t.style,weight:t.weight,display:"swap"});o.fonts.add(e),a.push(e.load())}))}})),a.length>0?Promise.all(a).then((function(){o.getElementById(t.id).style.fontFamily=e.trim()})):o.getElementById(t.id).style.fontFamily=e.trim()},removeClass:function(t,e){var n=new RegExp("(?:^|\\s)"+e+"(?!\\S)","g");t.className=t.className.replace(n,"")},hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(e,n){t.exports.hasClass(e,n)||(e.className+=" "+n)},cssToJsProperty:function(t){return this.cssToJsPropertyMappings[t]||t},spreedlyHostedFontFamilies:{lato:{fontFamily:"Lato",styles:[{file:"Lato-100.woff2",style:"normal",weight:"100"},{file:"Lato-300.woff2",style:"normal",weight:"300"},{file:"Lato-400.woff2",style:"normal",weight:"400"},{file:"Lato-700.woff2",style:"normal",weight:"700"},{file:"Lato-900.woff2",style:"normal",weight:"900"}]}},cssProperties:["accentColor","alignContent","alignItems","alignSelf","alignTracks","all","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimeline","animationTimingFunction","appearance","aspectRatio","backdropFilter","backfaceVisibility","background","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize","blockSize","border","borderBlock","borderBlockColor","borderBlockEnd","borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth","borderBlockStart","borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth","borderBlockStyle","borderBlockWidth","borderBottom","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderCollapse","borderColor","borderEndEndRadius","borderEndStartRadius","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderInline","borderInlineColor","borderInlineEnd","borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth","borderInlineStart","borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth","borderInlineStyle","borderInlineWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRadius","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStartEndRadius","borderStartStartRadius","borderStyle","borderTop","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","borderWidth","bottom","boxDecorationBreak","boxShadow","boxSizing","breakAfter","breakBefore","breakInside","captionSide","caretColor","clear","clip","clipPath","color","columnCount","columnFill","columnGap","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","columns","contain","content","contentVisibility","counterIncrement","counterReset","counterSet","cursor","direction","display","emptyCells","filter","flex","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","float","font","fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontOpticalSizing","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontSynthesis","fontVariant","fontVariantAlternatives","fontVariantCaps","fontVariantEastAsian","fontVariantEmoji","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontVariationSettings","fontWeight","forcedColorAdjust","gap","grid","gridArea","gridAutoColumns","gridAutoFlow","gridAutoRows","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","gridTemplate","gridTemplateAreas","gridTemplateColumns","gridTemplateRows","hangingPunctuation","height","hyphenatedCharacter","hyphens","imageOrientation","imageRendering","imageResolution","inherit","initial","initialLetter","initialLetterAlign","inlineSize","inset","insetBlock","insetBlockEnd","insetBlockStart","insetInline","insetInlineEnd","insetInlineStart","isolation","justifyContent","justifyItems","justifySelf","justifyTracks","left","letterSpacing","lineBreak","lineHeight","lineHeightStep","listStyle","listStyleImage","listStylePosition","listStyleType","margin","marginBlock","marginBlockEnd","marginBlockStart","marginBottom","marginInline","marginInlineEnd","marginInlineStart","marginLeft","marginRight","marginTop","marginTrim","maxBlockSize","maxHeight","maxInlineSize","maxWidth","minBlockSize","minHeight","minInlineSize","minWidth","mixBlendMode","objectFit","objectPosition","offset","offsetAnchor","offsetDistance","offsetPath","offsetPosition","offsetRotate","opacity","order","orphans","outline","outlineColor","outlineOffset","outlineStyle","outlineWidth","overflow","overflowAnchor","overflowBlock","overflowClipMargin","overflowInline","overflowWrap","overflowX","overflowY","overscrollBehavior","overscrollBehaviorBlock","overscrollBehaviorInline","overscrollBehaviorX","overscrollBehaviorY","padding","paddingBlock","paddingBlockStart","paddingBlockEnd","paddingBottom","paddingInline","paddingInlineEnd","paddingInlineStart","paddingLeft","paddingRight","paddingTop","pageBreakAfter","pageBreakBefore","pageBreakInside","perspective","perspectiveOrigin","placeContent","placeItems","placeSelf","pointerEvents","position","printColorAdjust","quotes","resize","revert","right","rotate","scale","tabSize","tableLayout","textAlign","textAlignLast","textAlignUpright","textDecoration","textDecorationColor","textDecorationLine","textDecorationStyle","textDecorationThickness","textEmphasis","textEmphasisColor","textEmphasisPosition","textEmphasisStyle","textIndent","textJustify","textOrientation","textOverflow","textRendering","textShadow","textSizeAdjust","textTransform","textUnderlineOffset","textUnderlinePosition","top","touchAction","transform","transformBox","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","verticalAlign","visibility","whiteSpace","widows","width","willChange","wordBreak","wordSpacing","wordWrap","writingMode","zIndex","-moz-appearance","-webkit-appearance"],cssToJsPropertyMappings:{float:"cssFloat"},mobile:screen.width<=480,browserVersion:function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!=(t=e.match(/\bOPR\/(\d+)/))?"Opera "+t[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}}},function(t,e,n){var r=n(3).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";t.exports=function(){var t=(new Date).getTime();return"xxxxxxxxxxxxxxxxx".replace(/x/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}},function(t,e,n){"use strict";t.exports=function(t){return"string"==typeof t&&!!t.match(/^\s*\S+/)}},function(t,e,n){"use strict";t.exports=function(t,e){return t[e]&&t[e].cdata||t[e]}},,,,function(t,e,n){"use strict";t.exports=function(t){return null!=t}},function(t,e,n){"use strict";var r={getJSON:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.setupRequest(t,"GET",e,n,i).send()},postJSON:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.setupRequest(t,"POST",n,i,o).send(JSON.stringify(e))},setupRequest:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===this.readyState){var t=null;try{(t=JSON.parse(this.responseText)).status=this.status}catch(e){t={status:this.status,unparseable:!0,message:"Unable to parse the response."}}this.status<400?n(t):r(t)}},o.open(e,t,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Cache-Control","no-cache");for(var a=0,s=Object.keys(i);a<s.length;a++){var c=s[a];o.setRequestHeader(c,i[c])}return o}};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(e,n,r,o){(0,i.default)(this,t),this.count=1,this.max=e,this.delay=n,this.work=r,this.exceeded=o,this.timeoutId=null,this.running=!0,this.runNow=this.runNow.bind(this),this.runLater=this.runLater.bind(this),this.isRunning=this.isRunning.bind(this)}return(0,o.default)(t,[{key:"runNow",value:function(){return!!this.running&&(this.work(),this.count++,!(this.count>this.max)||(this.exceeded(),this.stop(),!1))}},{key:"runLater",value:function(){var t=this;return!!this.isRunning()&&(this.timeoutId=setTimeout((function(){return t.runNow()}),this.delay),!0)}},{key:"stop",value:function(){this.running=!1,this.timeoutId&&clearTimeout(this.timeoutId)}},{key:"isRunning",value:function(){return this.running}}]),t}();t.exports=a},function(t,e,n){"use strict";(function(e){var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,null,[{key:"decode",value:function(t){if(t)try{return"undefined"!=typeof window&&window.atob?window.JSON.parse(window.atob(t)):JSON.parse(e.from(t,"base64").toString("utf-8"))}catch(t){}return null}}]),t}();t.exports=a}).call(this,n(68).Buffer)},function(t,e,n){"use strict";t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null==t,i="".concat(e," is required");if(r&&n)console.warn(i);else if(r)throw i;return t}},function(t,e,n){"use strict";var r=n(0),i=r(n(5)),o=r(n(1)),a=r(n(2));function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=n(10),u=n(11),d=n(20),h=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();(0,o.default)(this,t),this.frameId=e,this.destination=n,this.contents=r,this.token=i}return(0,a.default)(t,[{key:"inject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(document.getElementById(this.frameId))return!1;var e=document.getElementById(this.destination),n=document.createElement("iframe"),r=this.token;return t.show||(n.style.display="none"),t.classes&&(n.className=t.classes),n.src=t.src?t.src:"data:text/html;charset=utf-8,"+this.encodeContentsAndReceiverScript(),n.id=this.frameId,t.submit&&(n.onload=function(){n.contentWindow.postMessage(r,"*")}),e.appendChild(n),!0}},{key:"encodeContentsAndReceiverScript",value:function(){return encodeURI(this.contents+this.generateReceiverScript())}},{key:"generateReceiverScript",value:function(){return"\n    <script>\n      function messageHandler(event) {\n        if (event.data === '".concat(this.token,"' && document.forms && document.forms[0]) {\n          document.forms[0].submit()\n        }\n      }\n\n      if (window.addEventListener) {\n        window.addEventListener('message', messageHandler, false)\n      } else {\n        window.attachEvent('onmessage', messageHandler)\n      }\n    <\/script>\n    ")}}]),t}();t.exports={FrameManager:h,makeFrameManager:function(t){var e=t.frameManagerClass||h,n=t.frameId,r=t.destination,i=t.url,o=t.contents,a=t.injectOptions||{};d(n,"options.frameId"),d(i||o,"options.url or options.contents");var s=null,l=!1;return(u(i)||u(o))&&(s=new e(n,r,o),l=i?s.inject(c({submit:!1,src:i},a)):s.inject(c({submit:!0},a))),{success:l,frameManager:s}}}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(0),i=r(n(38)),o=r(n(3)),a=r(n(40));function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=n(8),u=n(41),d=n(42),h=n(61),f=n(64),p=n(65),m=n(4),g=n(84),y=function(t){return document.getElementById("spreedly-iframe")?document.getElementById("spreedly-iframe").getAttribute(t):null},v=function(t,e){return null===e||0===e.length?t:t+(t.indexOf("?")>=0?"&":"?")+e},b=function(t){return"express"===t?"client="+t:null!=t&&t.Click2PayIsEnabled?"c2p-stage="+t.stage:""};function w(){var t=this;this.Utils=f,this.ThreeDS=p,this.init=function(t,e){this.isLoaded()&&this.unload(),e&&e.source&&(this.source=e.source),e&&e.numberEl?this.numberTarget=e.numberEl:this.numberTarget=y("data-number-id"),e&&e.cvvEl?this.cvvTarget=e.cvvEl:this.cvvTarget=y("data-cvv-id"),this.environmentKey=t||y("data-environment-key"),this.numberFrameId="spreedly-number-frame-"+this.uniqueId,this.cvvFrameId="spreedly-cvv-frame-"+this.uniqueId,this.addIframeElements()},this.c2pInit=function(){var t=(0,a.default)(i.default.mark((function t(e,n){var r,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.environmentKey=e||y("data-environment-key"),null!=n&&n.c2pConfig){t.next=4;break}return console.error("Click to Pay options are not present!"),t.abrupt("return");case 4:if(!(r=this.c2pSDKValidationAndInitialParams(n.isTest)).isValid){t.next=14;break}this.locale=r.c2pDpaLocale,n.c2pConfig.srcDpaId=r.srcDpaId,n.c2pConfig.dpaTransactionOptions.dpaLocale=this.locale,n.c2pSandbox=r.c2pSandbox,n.c2pSrc=r.c2pSrc,this.click2payInstance=new window.Click2Pay,t.next=16;break;case 14:return console.error("Mastercard SDK is not present!"),t.abrupt("return");case 16:return t.prev=16,t.next=19,this.click2payInstance.init(n.c2pConfig);case 19:o=t.sent,this.c2pInitiated(o,n),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(16),this.c2pError("c2p_invalid_initialization_options","C2P invalid initialization options."),this.emit("c2p-initialized",{success:!1});case 27:case"end":return t.stop()}}),t,this,[[16,23]])})));return function(e,n){return t.apply(this,arguments)}}(),this.c2pInitiated=function(){var e=(0,a.default)(i.default.mark((function e(n,r){var o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.availableCardBrands&&n.availableServices.length>=1)){e.next=28;break}return o=["mastercard","visa","discover","amex"],t.availableCardBrands=n.availableCardBrands.sort((function(t,e){return o.indexOf(t)-o.indexOf(e)})),t.cardBrands=t.availableCardBrands.join(","),t.c2p={config:r.c2pConfig,frame_id:r.c2pFrameEl,frame_style:r.c2pFrameStyle,dpaId:r.c2pConfig.srcDpaId,isSandbox:r.c2pSandbox,src:r.c2pSrc},t.c2pSandboxLog("C2P valid options"),t.emit("c2p-initialized",{success:!0,c2pInitialization:n}),e.prev=7,e.next=10,t.click2payInstance.getCards();case 10:a=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),t.c2pError("c2p_card_retrieval",e.t0),e.abrupt("return");case 17:if(t.c2pSandboxLog(a),!(a.length>0)){e.next=24;break}return t.c2pSandboxLog("Display cards"),e.next=22,t.displayCards(r,a);case 22:e.next=26;break;case 24:t.c2pSandboxLog("Identity lookup"),t.identifyLookup(r);case 26:e.next=29;break;case 28:console.error("C2P not valid options");case 29:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,n){return e.apply(this,arguments)}}(),this.c2pSandboxLog=function(){var e;t.c2p.isSandbox&&(e=console).log.apply(e,arguments)},this.loadIdentifyLookupOptions=function(t){var e,n,r,i={mobileNumber:{}};null!=t&&null!==(e=t.customer)&&void 0!==e&&e.email&&(i.email=t.customer.email),null!=t&&null!==(n=t.customer)&&void 0!==n&&null!==(n=n.phone)&&void 0!==n&&n.number&&(i.mobileNumber.phoneNumber=t.customer.phone.number),null!=t&&null!==(r=t.customer)&&void 0!==r&&null!==(r=r.phone)&&void 0!==r&&r.countryCode&&(i.mobileNumber.countryCode=t.customer.phone.countryCode);var o=this.getMerchantElementById(null==t?void 0:t.emailEl,"data-email-id"),a=this.getMerchantElementById(null==t?void 0:t.phoneEl,"data-phone-id"),s=this.getMerchantElementById(null==t?void 0:t.countryCodeEl,"data-country-code-id");return null!=o&&o.value&&(i.email=o.value),null!=a&&a.value&&(i.mobileNumber.phoneNumber=a.value),null!=s&&s.value&&(i.mobileNumber.countryCode=s.value),i},this.getIdLookup=function(t){var e,n,r;return this.customer=this.loadIdentifyLookupOptions(t),"phoneNumber"===("phonenumber"===(null===(e=t.customer)||void 0===e||null===(e=e.mainLookupMethod)||void 0===e?void 0:e.toLowerCase())?"phoneNumber":"email")?this.isMobileNumberPresent(null===(n=this.customer)||void 0===n?void 0:n.mobileNumber)?{mobileNumber:this.customer.mobileNumber}:{email:this.customer.email}:null!==(r=this.customer)&&void 0!==r&&r.email?{email:this.customer.email}:{mobileNumber:this.customer.mobileNumber}},this.isMobileNumberPresent=function(t){return(null==t?void 0:t.countryCode)&&(null==t?void 0:t.phoneNumber)},this.identifyLookup=function(){var t=(0,a.default)(i.default.mark((function t(e){var n,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.getIdLookup(e),t.next=4,this.click2payInstance.idLookup(n);case 4:null!=(r=t.sent)&&r.consumerPresent?this.handleOTP(e):this.makeVisibleNormalInit(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.c2pError("c2p_lookup",t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),this.c2pCVVContainer=function(){var t=document.getElementById(this.cvvTarget);this.cvvContainerTarget&&(this.cvvContainerEl=document.getElementById(this.cvvContainerTarget),this.cvvContainerEl?this.cvvContainerEl.appendChild(t):this.cardsEl.parentNode.insertBefore(t,this.cardsEl.nextSibling))},this.displayCards=function(){var t=(0,a.default)(i.default.mark((function t(e,n){var r,o,s,c,l=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this,this.cardsEl=this.getMerchantElementById(null==e?void 0:e.cardsEl,"data-cards-id"),o=n[0],s=null==e?void 0:e.displayCards,this.cardsEl.style.visibility="visible",c=["radioButton","gridView"],this.c2pSandboxLog("Display card list"),this.cardsEl.displaySignOut="boolean"!=typeof(null==s?void 0:s.displaySignOut)||s.displaySignOut,this.cardsEl.displayPreferredCard="boolean"!=typeof(null==s?void 0:s.displayPreferredCard)||s.displayPreferredCard,this.cardsEl.cardBrands=this.cardBrands,this.cardsEl.cardSelectionType=c.includes(null==s?void 0:s.cardSelectionType)?s.cardSelectionType:"radioButton",this.cardsEl.loadCards(n),this.cardsEl.displayAddCard="boolean"!=typeof(null==s?void 0:s.displayAddCard)||s.displayAddCard,this.cardsEl.locale=this.locale,this.cardsEl.srcDigitalCardId=o.srcDigitalCardId,this.init(this.environmentKey,e),this.cvvContainerTarget=null!=e&&e.cvvContainerEl?e.cvvContainerEl:y("data-cvv-container-id"),this.c2pCVVContainer(),this.emit("display-cards-ready"),this.c2pSandboxLog("default srcDigitalCardId:",this.cardsEl.srcDigitalCardId),this.cardsEl.addEventListener("selectSrcDigitalCardId",(function(t){r.c2pSandboxLog("srcDigitalCardId: ",t.detail),r.srcDigitalCardId=t.detail})),this.cardsEl.addEventListener("clickAddCardLink",(function(t){r.c2pSandboxLog("Add a Card button clicked: ",t),r.cardsEl.style.visibility="hidden",r.cardsEl.style.display="none",r.makeVisibleNormalInit(e)})),this.cardsEl.addEventListener("clickSignOutLink",(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.click2payInstance.signOut();case 3:return r.cardsEl.style.visibility="hidden",r.emit("c2p-session-deleted"),t.abrupt("return",!1);case 8:t.prev=8,t.t0=t.catch(0),l.c2pError("c2p_sign_out",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))));case 23:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),this.makeVisibleNormalInit=function(t){var e=this;this.init(this.environmentKey,t),this.emit("add-new-card",this.availableCardBrands);var n=this.getMerchantElementById(null==t?void 0:t.spreedlyPaymentFormEl,"data-spreedly-payment-form-id");n.style.visibility="visible";var r=this.getMerchantElementById(null==t?void 0:t.spreedlyPaymentFormC2PSubmitEl,"data-spreedly-payment-c2p-submit-id"),i=document.getElementById(this.cvvTarget);if(r.parentNode.insertBefore(i,r.previousSibling.previousSibling),t.isGuest&&(this.getMerchantElementById(null==t?void 0:t.spreedlyPaymentFormSubmitEl,"data-spreedly-payment-submit-id").style.visibility="visible",r.style.visibility="hidden"),r&&this.cardsEl){var o="go-back-link"+this.uniqueId;if(!document.getElementById(o)){var a=document.createElement("a");a.href="#",a.id=o,a.textContent="Go back",a.onclick=function(){e.c2pSandboxLog("Go back"),n.style.visibility="hidden",e.cardsEl.style.visibility="visible",e.cardsEl.style.display="block",e.emit("display-cards-ready"),e.c2pCVVContainer()},r.parentNode.insertBefore(a,r.afterSibling)}}},this.loadOTPElements=function(t){var e,n=this,r=["overlay","none"].includes(null==t||null===(e=t.otp)||void 0===e?void 0:e.type)?t.otp.type:"overlay";this.otpEl=this.getMerchantElementById(null==t?void 0:t.otpEl,"data-otp-id"),this.otpChannelsEl=this.getMerchantElementById(null==t?void 0:t.otpChannelSelectionEl,"data-otp-channel-selection-target-id"),this.otpChannelsEl.locale=this.locale,this.otpEl.cardBrands=this.cardBrands,this.otpEl.style.visibility="visible",this.otpEl.type=r,this.otpEl.locale=this.locale,this.otpEl.addEventListener("continue",(0,a.default)(i.default.mark((function e(){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.handleValidation();case 3:(r=e.sent).isValid?(n.otpEl.style.visibility="hidden",n.otpEl.type="none",n.displayCards(t,r.cards)):r.errorReason?(n.otpEl.errorReason=r.errorReason,"ACCT_INACCESSIBLE"===r.errorReason&&(o=[{attribute:"otp_code",key:"errors.acct_inaccessible",message:"The account exists but is not currently accessible (e.g. is locked)."}],n.emit("errors",o),n.otpEl.style.visibility="hidden",n.otpEl.type="none")):n.c2pSandboxLog("No cards present"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.c2pError("c2p_otp_handle_validation",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),this.otpEl.addEventListener("otpChanged",(function(t){return n.otpValue=t.detail,t})),this.otpEl.addEventListener("alternateRequested",(function(){var e;n.otpEl.style.visibility="hidden",n.otpEl.type="none",n.otpChannelsEl.style.visibility="visible",n.otpChannelsEl.type=["overlay","none"].includes(null==t||null===(e=t.otpChannels)||void 0===e?void 0:e.type)?t.otpChannels.type:"overlay",n.otpChannelsEl.cardBrands=n.cardBrands,n.otpChannelsEl.identityValidationChannels=n.otpChannels?n.otpChannels:n.otpDefaultChannel})),this.otpEl.addEventListener("close",(function(){return n.otpEl.style.visibility="hidden",n.otpEl.type="none",!1})),this.otpChannelsEl.addEventListener("continue",(function(){n.otpChannelsEl.style.visibility="hidden",n.otpChannelsEl.type="none","GUEST"===n.otpChannel.identityType?(t.isGuest=!0,n.makeVisibleNormalInit(t)):(n.otpEl.errorReason="",n.otpChannelRequested={requestedValidationChannelId:n.otpChannel.validationChannelId},n.handleOTP(t),n.otpEl.style.visibility="visible",n.otpEl.type=r)})),this.otpChannelsEl.addEventListener("selectChannel",(function(t){n.otpChannel=t.detail})),this.otpChannelsEl.addEventListener("close",(function(){return n.otpChannelsEl.style.visibility="hidden",n.otpChannelsEl.type="none",!1}))},this.otpInitiated=function(t,e){var n;this.otpEl||this.otpChannelsEl?(this.otpEl.style.visibility="visible",this.otpEl.type=["overlay","none"].includes(null==e||null===(n=e.otp)||void 0===n?void 0:n.type)?e.otp.type:"overlay"):this.loadOTPElements(e);this.otpEl.maskedIdentityValue=t.maskedValidationChannel,this.otpDefaultChannel=[{identityType:"EMAIL",validationChannelId:"EMAIL",identityProvider:t.network,maskedValidationChannel:t.maskedValidationChannel}],this.otpChannels=t.supportedValidationChannels},this.otpRejected=function(){return this.emit("errors",[{attribute:"otp_code",key:"errors.otp_permissions_denied",message:"Unexpected error happened when trying to initiate validation"}])},this.handleOTP=function(){var t=(0,a.default)(i.default.mark((function t(e){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.c2pSandboxLog("initiateValidation"),t.prev=1,t.next=4,this.click2payInstance.initiateValidation(this.otpChannelRequested);case 4:n=t.sent,this.otpInitiated(n,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.otpRejected();case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),this.handleValidation=(0,a.default)(i.default.mark((function t(){var e,n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},t.prev=1,t.next=4,this.click2payInstance.validate({value:this.otpValue});case 4:e.cards=t.sent,e.isValid=(null==e||null===(n=e.cards)||void 0===n?void 0:n.length)>0,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.isValid=!1,e.errorReason=t.t0.reason;case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,8]])}))),this.c2pCheckout=function(){var t=(0,a.default)(i.default.mark((function t(e){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setPermitableParams(e),this.setParam("c2p_dpa_id",this.c2p.dpaId),this.setParam("c2p_is_sandbox",this.c2p.isSandbox),null==e||!e.isCheckoutWithCard){t.next=9;break}return t.next=6,this.checkoutWithCard();case 6:e.isCheckoutWithCard=!1,t.next=11;break;case 9:this.setParam("c2p_available_card_brands",this.availableCardBrands),this.sendMessage("c2pNewCard");case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),this.c2pSDKValidationAndInitialParams=function(t){if(t)return t;var e=document.getElementsByTagName("script"),n=Array.prototype.slice.call(e),r=n.findIndex((function(t){return t.src.includes("src.mastercard.com/srci/integration/2/lib.js")}));if(r>-1){var i=e[r].src,o=new URL(i),a=i.includes("sandbox"),s=new URLSearchParams(o.search),c=s.get("srcDpaId"),l=s.get("locale");return c?l?{srcDpaId:c,c2pDpaLocale:l,c2pSandbox:a,c2pSrc:i,isValid:!0}:void console.error("Locale is missing in the src params"):void console.error("DPA ID is missing in the src params")}return{isValid:!1}},this.checkoutWithCardWindow=function(){var t=this.c2p.frame_id,e=this.c2p.frame_style;this.c2pFrameTarget=t||y("data-click-to-pay-frame-id");var n=this.c2pFrameTarget?this.c2pFrameTarget:"";return n&&(document.getElementById(this.c2pFrameTarget).style.visibility="visible",document.getElementById(this.c2pFrameTarget).style.display="block"),this.c2pFrameEl=window.open("",n,e),this.c2pFrameEl},this.checkoutWithCard=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.c2pSandboxLog("checkoutWithCard"),t.prev=1,t.next=4,this.click2payInstance.checkoutWithCard({srcDigitalCardId:this.srcDigitalCardId,windowRef:this.checkoutWithCardWindow()});case 4:return e=t.sent,this.c2pSandboxLog(e),this.triggerGetC2PToken(e),t.abrupt("return",e);case 10:t.prev=10,t.t0=t.catch(1),this.c2pError("c2p_checkout_with_card",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),this.checkoutWithNewCard=function(){var t=(0,a.default)(i.default.mark((function t(e){var n,r,o,a,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.c2pSandboxLog("checkoutWithNewCard"),a={encryptedCard:e.encryptedCard,windowRef:this.checkoutWithCardWindow(),cardBrand:e.cardBrand,consumer:{emailAddress:null===(n=this.customer)||void 0===n?void 0:n.email,mobileNumber:{phoneNumber:null===(r=this.customer)||void 0===r||null===(r=r.mobileNumber)||void 0===r?void 0:r.phoneNumber,countryCode:null===(o=this.customer)||void 0===o||null===(o=o.mobileNumber)||void 0===o?void 0:o.countryCode}}},t.prev=2,t.next=5,this.click2payInstance.checkoutWithNewCard(a);case 5:return s=t.sent,this.c2pSandboxLog(s),this.triggerGetC2PToken(s),t.abrupt("return",s);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",this.c2pError("checkout_code","The card entered is not valid."));case 14:case"end":return t.stop()}}),t,this,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),this.makeInvisibleC2PFrame=function(){document.getElementById(this.c2pFrameTarget).style.visibility="hidden",document.getElementById(this.c2pFrameTarget).style.display="none",this.c2pFrameEl.close()},this.triggerGetC2PToken=function(){var t=(0,a.default)(i.default.mark((function t(e){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.checkoutActionCode.toUpperCase(),t.next="CHANGE_CARD"===t.t0?3:"ADD_CARD"===t.t0?7:"SWITCH_CONSUMER"===t.t0?11:"CANCEL"===t.t0?15:"COMPLETE"===t.t0?19:24;break;case 3:return this.c2pSandboxLog("Consumer wishes to select an alternative card."),this.emit("checkout-different-pm"),this.makeInvisibleC2PFrame(),t.abrupt("break",27);case 7:return this.c2pSandboxLog("Consumer wishes to add a new card."),this.emit("add-new-card"),this.makeInvisibleC2PFrame(),t.abrupt("break",27);case 11:return this.c2pSandboxLog("Consumer wishes to change account profile / identity"),this.emit("c2p-session-deleted"),this.makeInvisibleC2PFrame(),t.abrupt("break",27);case 15:return this.c2pSandboxLog("Consumer wishes to cancel the flow"),this.emit("checkout-cancelled"),this.makeInvisibleC2PFrame(),t.abrupt("break",27);case 19:return this.c2pSandboxLog("Checkout processing completed normally â€“ Success"),this.setParam("environment_key",this.environmentKey),this.setParam("c2p_checkout_response",e),this.sendMessage("getTokenBasedOnC2PToken"),t.abrupt("break",27);case 24:this.emit("checkout-error"),this.c2pSandboxLog("An error was detected and the checkout processing cannot continue","- resume normally Business as usual without click to pay"),console.error("An error was detected and the checkout processing cannot continue.");case 27:return t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),this.addIframeElements=function(){var t,e=u('<iframe sandbox="allow-scripts allow-same-origin" frameborder="0" width="100%" height="100%" scrolling="no"></iframe>'),n={Click2PayIsEnabled:!0,stage:null!=this&&null!==(t=this.c2p)&&void 0!==t&&t.isSandbox?"sandbox":"production"};e.id=this.numberFrameId,e.name=this.numberFrameId,e.setAttribute("src",v("https://core.spreedly.com/v1/embedded/number-frame-1.136.html",b(this.source||n))),document.getElementById(this.numberTarget).appendChild(e);var r=u('<iframe sandbox="allow-scripts allow-same-origin" frameborder="0" width="100%" height="100%" scrolling="no"></iframe>');r.id=this.cvvFrameId,r.name=this.cvvFrameId,r.setAttribute("src",v("https://core.spreedly.com/v1/embedded/cvv-frame-1.136.html",b(this.source))),document.getElementById(this.cvvTarget).appendChild(r)},this.getMerchantElementById=function(t,e){var n=t||y(e);return document.getElementById(n)},this.stripeRadar=function(t,e,n){var r;if(!window.Stripe)return console.error("Cannot find Stripe on page."),e(null),null;var i={canCreateRadarSession:!0};if(null!=n&&n.stripeAccount&&(i.stripeAccount=n.stripeAccount),!(r=window.Stripe(t,i)))return console.error("Creating a Stripe session failed."),e(null),null;r.createRadarSession().then((function(t){var n;t.radarSession&&t.radarSession.id?n=t.radarSession.id:(t.error&&console.error("Spreedly: Creating a radar session failed. Reason: "+t.error.message),n=null),e(n)}))},this.createStripePaymentElement=function(t){if(!window.Stripe)return{error:"Cannot find Stripe on page."};if(!t.publishableKey)return{error:"Required input field 'publishableKey' was not supplied."};if(!t.clientSecret)return{error:"Required input field 'clientSecret' was not supplied."};if(!t.transactionToken)return{error:"Required input field 'transactionToken' was not supplied."};if(!t.paymentElement)return{error:"Required input field 'paymentElement' was not supplied."};var e=window.Stripe(t.publishableKey);if(!e)return{error:"Creating a Stripe session failed."};var n={clientSecret:t.clientSecret,appeareance:t.appeareance},r=t.spreedlyRoot||"https://core.spreedly.com",i={return_url:"".concat(r,"/transaction/").concat(t.transactionToken,"/redirect")},o=e.elements(n);return o.create("payment").mount(t.paymentElement),{confirmPayment:function(){return e.confirmPayment({elements:o,confirmParams:i})}}},this.createBraintreePaymentElements=function(t){var e,n,r,i,o=["callbackFunction","transactionToken","paymentElements","environmentKey"].filter((function(e){return Object.keys(t).indexOf(e)<0}));if(o.length>0)return{error:"Missing required parameter/s: ".concat(o)};var a=[];if(null!==(e=window.braintree)&&void 0!==e&&e.client||a.push("Client"),!t.paymentElements.paypal||null!==(n=window.braintree)&&void 0!==n&&n.paypalCheckout||a.push("Paypal Checkout"),!t.paymentElements.venmo||null!==(r=window.braintree)&&void 0!==r&&r.venmo||a.push("Venmo"),!t.paymentElements.venmo||null!==(i=window.braintree)&&void 0!==i&&i.dataCollector||a.push("Data Collector"),a.length>0)return{error:"The following Braintree scripts are not present on page: ".concat(a)};if("function"!=typeof t.callbackFunction)return{error:"Required parameter 'callbackFunction' is not a function."};var s=function(e){var n;if(e.transaction){var r={amount:e.transaction.amount/100,currencyCode:e.transaction.currency_code,clientToken:e.transaction.client_token,paymentMethodUsed:e.transaction.payment_method_type,paypalFlow:e.transaction.paypal_flow_type,transactionType:e.transaction.transaction_type,enablePaylaterButton:e.transaction.enable_paylater_button,venmoFlow:e.transaction.venmo_flow_type,venmoProfileId:e.transaction.venmo_profile_id,billingAgreementDescription:e.transaction.billing_agreement_description,lineItems:e.transaction.line_items,shippingAddress:e.transaction.shipping_address,locale:e.transaction.locale};if(!["vault","checkout_with_vault"].includes(r.paypalFlow)||!t.paymentElements.paypal||null!==(n=window.braintree)&&void 0!==n&&n.dataCollector)if(Object.keys(t.paymentElements).includes(r.paymentMethodUsed.toLowerCase()))l(e.transaction.created_at)?g.initializeBraintreeButtons(t,r):console.error("The client token is no longer valid.");else console.error("Cannot find payment element corresponding to payment method used during transaction.");else console.error("The Data Collector Braintree script is not present on page")}else console.error("An error occured while obtaining required information from transactionToken.")},c=function(){console.error("An error occured while obtaining required information from transactionToken.")},l=function(t){var e=new Date(t),n=new Date;return!(Math.abs(e.getTime()-n.getTime())>=864e5)};"testToken"==t.transactionToken?window.withStatus(t.transactionToken,t.environmentKey,s,c):m.withStatus(t.transactionToken,t.environmentKey,s,c)},this.checkUniqueId=function(t){return t===this.uniqueId},this.on=function(t,e){this.emitter.on(t,e)},this.emit=function(t,e,n,r,i){this.emitter.emit(t,e,n,r,i)},this.c2pError=function(t,e){var n={attribute:t,key:"errors.".concat(t),message:e};return this.emit("errors",[n])},this.isLoaded=function(){return!(!this.numberFrameId&&!this.cvvFrameId)&&!(!document.getElementById(this.numberFrameId)&&!document.getElementById(this.cvvFrameId))},this.reload=function(){this.unload();var t={numberEl:this.numberTarget,cvvEl:this.cvvTarget};this.init(this.environmentKey,t)},this.removeHandlers=function(){h(this.emitter)},this.resetFields=function(){this.sendMessage("reset")},this.sendMessage=function(t){document.getElementById(this.numberFrameId).contentWindow.postMessage(t,"https://core.spreedly.com")},this.setValue=function(t,e){"cvv"===t?this.sendMessage("setCvv: "+e):"number"===t&&this.sendMessage("setNumber: "+e)},this.setLabel=function(t,e){"cvv"===t?this.sendMessage("setCvvLabel: "+e):"number"===t&&this.sendMessage("setNumberLabel: "+e)},this.setTitle=function(t,e){"cvv"===t?this.sendMessage("setCvvTitle: "+e):"number"===t&&this.sendMessage("setNumberTitle: "+e)},this.setInputMode=function(t,e){"cvv"===t?this.sendMessage("setCvvInputMode: "+e):"number"===t&&this.sendMessage("setNumberInputMode: "+e)},this.setFieldType=function(t,e){e||(e=t,t="number"),"cvv"===t?this.sendMessage("setCvvType: "+e):"number"===t&&this.sendMessage("setNumberType: "+e)},this.setNumberFormat=function(t){this.sendMessage("numberFormat: "+t)},this.toggleAutoComplete=function(){this.sendMessage("autoComplete")},this.setRequiredAttribute=function(t){"cvv"===t?this.sendMessage("setCvvRequiredAttribute"):"number"===t&&this.sendMessage("setNumberRequiredAttribute")},this.toggleMask=function(){this.sendMessage("toggleMask")},this.setPlaceholder=function(t,e){this.sendMessage("placeholder: "+t+":"+e)},this.setParam=function(t,e){"object"===(0,o.default)(e)&&null!==e&&(e=JSON.stringify(e)),this.sendMessage("param("+t+"): "+e)},this.setStyle=function(t,e){this.sendMessage("style("+t+"): "+e)},this.setRecache=function(t,e){this.sendMessage("setRecache: "+t),this.setParam("environment_key",this.environmentKey),e&&e.last_four_digits&&this.setParam("last_four_digits",e.last_four_digits),e&&e.card_type&&this.setParam("card_type",e.card_type)},this.recache=function(){this.sendMessage("recache")},this.setPermitableParams=function(t){if(this.setParam("environment_key",this.environmentKey),t){var e,n=Object.keys(t),r=s(k);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.includes(i)&&("string"==typeof t[i]||"number"==typeof t[i]?""!==t[i]&&this.setParam(i,t[i]):console.warn("Tokenization parameter ".concat(i," should be type string, was type ").concat((0,o.default)(t[i]))))}}catch(t){r.e(t)}finally{r.f()}var a,c=s(_);try{for(c.s();!(a=c.n()).done;){var l=a.value;n.includes(l)&&("boolean"==typeof t[l]||"true"===t[l].toLowerCase()||"false"===t[l].toLowerCase()?this.setParam(l,t[l]):console.warn("Tokenization parameter ".concat(l," should be type boolean or string 'true' or 'false'")))}}catch(t){c.e(t)}finally{c.f()}var u,d=s(x);try{for(d.s();!(u=d.n()).done;){var h=u.value;n.includes(h)&&("object"===(0,o.default)(t[h])?this.setParam(h,t[h]):console.warn("Tokenization parameter ".concat(h," should be type object, was type ").concat((0,o.default)(t[h]))))}}catch(t){d.e(t)}finally{d.f()}}},this.tokenizeCreditCard=function(t){return this.setPermitableParams(t),this.sendMessage("getToken"),!1},this.transferFocus=function(t){this.sendMessage("focus: "+t)},this.unload=function(){var t=document.getElementById(this.numberFrameId);t&&t.parentNode.removeChild(t);var e=document.getElementById(this.cvvFrameId);e&&e.parentNode.removeChild(e)},this.validate=function(){this.sendMessage("validate")},this.buildMessageHandler=function(){var t=this;return function(e){if(("string"==typeof e.data||e.data instanceof String)&&"https://core.spreedly.com"===e.origin&&t.checkUniqueId(e.data.substring(0,4))&&t.isLoaded()){var n,r=e.data.substring(4);if("frameLoaded:"===r);else if("iframesReady"===r)t.source&&t.sendMessage("source: "+t.source),t.emit("ready");else if("recacheReady"===r)t.emit("recacheReady");else if(n=r.match(/paymentMethod\((.*)\): (.*)/i))t.emit("paymentMethod",n[1],JSON.parse(n[2]));else if(n=r.match(/c2pCard: (.*)/i)){var i=JSON.parse(n[1]);t.checkoutWithNewCard(i)}else if(n=r.match(/recacheResult\((.*)\): (.*)/i))t.emit("recache",n[1],JSON.parse(n[2]));else if(n=r.match(/errors: (.*)/i))t.emit("errors",JSON.parse(n[1]));else if(n=r.match(/validation: (.*)/i))t.emit("validation",JSON.parse(n[1]));else if(n=r.match(/input: (.*)/i)){var o=JSON.parse(n[1]),a=o.activeElement;t.emit("fieldEvent",a,"input",a,o)}else(n=r.match(/notifyEvent\( (.*)\): (.*):(.*)/i))?t.emit("fieldEvent",n[1],n[2],n[3],{}):(n=r.match(/consoleError: (.*)/i))?t.emit("consoleError",JSON.parse(n[1])):"numberSet"===r?t.emit("numberSet"):"cvvSet"===r?t.emit("cvvSet"):(n=r.match(/sourceSet: (.*)/i))&&t.emit("sourceSet",n[1])}}},this.uniqueId=(Math.floor(8999*Math.random())+1e3).toString(),this.messageHandler=this.buildMessageHandler(),l.addListener(window,"message",this.messageHandler),this.emitter=new d}var E=new w;t.exports=E,window.Spreedly=E,window.SpreedlyPaymentFrame=w;var k=["first_name","last_name","full_name","email","month","year","address1","address2","city","state","zip","country","phone_number","company","shipping_address1","shipping_address2","shipping_city","shipping_state","shipping_zip","shipping_country","shipping_phone_number"],_=["eligible_for_card_updater"],x=["metadata"]},function(t,e,n){var r=n(39)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(3).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new B(r||[]);return s(o,"_invoke",{value:I(t,n,a)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var m="suspendedStart",g="executing",y="completed",v={};function b(){}function w(){}function E(){}var k={};h(k,l,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(R([])));x&&x!==o&&a.call(x,l)&&(k=x);var C=E.prototype=b.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(i,o,s,c){var l=p(t[i],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var i;s(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var i=m;return function(o,a){if(i===g)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=A(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=p(t,n,r);if("normal"===l.type){if(i=r.done?y:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=E,s(C,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,d,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,h(t,d,"GeneratorFunction")),t.prototype=Object.create(C),t},n.awrap=function(t){return{__await:t}},S(P.prototype),h(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new P(f(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(C),h(C,d,"Generator"),h(C,l,(function(){return this})),h(C,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=R,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){return(o=e.createElement("html")).innerHTML=t,o.removeChild(o.lastChild)}var o,a=Object.prototype.hasOwnProperty.call(i,r)?i[r]:i._default,s=a[0],c=a[1],l=a[2];(o=e.createElement("div")).innerHTML=c+t+l;for(;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);var u=e.createDocumentFragment();for(;o.firstChild;)u.appendChild(o.removeChild(o.firstChild));return u};var n,r=!1;"undefined"!=typeof document&&((n=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',r=!n.getElementsByTagName("link").length,n=void 0);var i={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],i.option=i.optgroup=[1,'<select multiple="multiple">',"</select>"],i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","</table>"],i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},function(t,e,n){"use strict";var r,i,o,a,s,c,l,u=n(43),d=n(60),h=Function.prototype.apply,f=Function.prototype.call,p=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var n,i;return d(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),h.call(e,this,arguments)}),n.__eeOnceListener__=e,this},s={on:r=function(t,e){var n;return d(e),y.call(this,"__ee__")?n=this.__ee__:(n=v.value=p(null),m(this,"__ee__",v),v.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:i,off:o=function(t,e){var n,r,i,o;if(d(e),!y.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:a=function(t){var e,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)h.call(r,this,o)}else switch(arguments.length){case 1:f.call(i,this);break;case 2:f.call(i,this,arguments[1]);break;case 3:f.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];h.call(i,this,o)}}},c={on:u(r),once:u(i),off:u(o),emit:u(a)},l=g({},c),t.exports=e=function(t){return null==t?p(l):g(Object(t),c)},e.methods=s},function(t,e,n){"use strict";var r=n(16),i=n(44),o=n(48),a=n(56),s=n(57);(t.exports=function(t,e){var n,i,c,l,u;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],r(t)?(n=s.call(t,"c"),i=s.call(t,"e"),c=s.call(t,"w")):(n=c=!0,i=!1),u={value:e,configurable:n,enumerable:i,writable:c},l?o(a(l),u):u}).gs=function(t,e,n){var c,l,u,d;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],r(e)?i(e)?r(n)?i(n)||(u=n,n=void 0):n=void 0:(u=e,e=n=void 0):e=void 0,r(t)?(c=s.call(t,"c"),l=s.call(t,"e")):(c=!0,l=!1),d={get:e,set:n,configurable:c,enumerable:l},u?o(a(u),d):d}},function(t,e,n){"use strict";var r=n(45),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(t){return!!r(t)&&!i.test(o.call(t))}},function(t,e,n){"use strict";var r=n(46);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!r(t)}},function(t,e,n){"use strict";var r=n(47);t.exports=function(t){if(!r(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(16),i={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!r(t)&&hasOwnProperty.call(i,typeof t)}},function(t,e,n){"use strict";t.exports=n(49)()?Object.assign:n(50)},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(51),i=n(55),o=Math.max;t.exports=function(t,e){var n,a,s,c=o(arguments.length,2);for(t=Object(i(t)),s=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},a=1;a<c;++a)r(e=arguments[a]).forEach(s);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(52)()?Object.keys:n(53)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(7),i=Object.keys;t.exports=function(t){return i(r(t)?Object(t):t)}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(7);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";var r=n(7),i=Array.prototype.forEach,o=Object.create,a=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=o(null);return i.call(arguments,(function(t){r(t)&&a(Object(t),e)})),e}},function(t,e,n){"use strict";t.exports=n(58)()?String.prototype.contains:n(59)},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";var r=n(62),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e,n=arguments[1];if(r(t),void 0===n)i.call(t,"__ee__")&&delete t.__ee__;else{if(!(e=i.call(t,"__ee__")&&t.__ee__))return;e[n]&&delete e[n]}}},function(t,e,n){"use strict";var r=n(63);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not an Object");return t}},function(t,e,n){"use strict";var r=n(7),i={function:!0,object:!0};t.exports=function(t){return r(t)&&i[typeof t]||!1}},function(t,e,n){"use strict";var r=n(17),i=n(18),o=n(10);t.exports={Request:r,Retryable:i,tokenGenerator:o}},function(t,e,n){"use strict";var r=n(66),i=n(67);t.exports={Lifecycle:i,serialize:r.serialize}},function(t,e,n){"use strict";function r(t){return function(e){var n=e||window;return n.screen&&n.screen[t]||null}}function i(t){return function(e){var n=e||window;return n.navigator&&n.navigator[t]||null}}function o(){return(new Date).getTimezoneOffset()}function a(t){var e=t||window;return e.navigator&&e.navigator.javaEnabled?e.navigator.javaEnabled():null}var s=r("width"),c=r("height"),l=r("colorDepth"),u=i("userAgent"),d=i("language");t.exports={width:s,height:c,depth:l,timezone:o,userAgent:u,java:a,language:d,serialize:function(t,e,n){var r=n||window;return btoa(JSON.stringify(function(t,e,n){var r=n||window;return{width:s(r),height:c(r),depth:l(r),timezone:o(),user_agent:u(r),java:a(r),language:d(r),browser_size:t,accept_header:e||"text/html,application/xhtml+xml,application/xml"}}(t,e,r)))}}},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=n(4),s=n(20),c=n(73),l=n(75),u=n(77),d=n(78),h=n(80),f=n(81),p=n(82),m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t),this.hiddenIframeLocation=s(e.hiddenIframeLocation,"hiddenIframeLocation option"),this.transactionToken=s(e.transactionToken,"transactionToken option"),this.challengeIframeLocation=s(e.challengeIframeLocation,"challengeIframeLocation option"),this.challengeIframeClasses=e.challengeIframeClasses,this.environmentKey=s(e.environmentKey,"environmentKey option",!0),this.Redirect=e.Redirect||d,this.Challenge=e.Challenge||p,this.DeviceFingerprint=e.DeviceFingerprint||f,this.start=this.start.bind(this),this.poll=this.poll.bind(this),this.stopPolling=this.stopPolling.bind(this),this.finalize=this.finalize.bind(this),this.event=this.event.bind(this),this.error=this.error.bind(this),this.installPoller=this.installPoller.bind(this),this.poller=e.poller,this.statusManager=e.statusManager||new l,this.eventPublisher=new c(this.finalize,this.transactionToken,this.statusManager,e.notifier||window.Spreedly),this.StatusPolling=e.StatusPolling||a,this.deviceFingerprintTimeoutTask=e.deviceFingerprintTimeoutTask||new u(10,"device-fingerprint",this.eventPublisher)}return(0,o.default)(t,[{key:"installExtensions",value:function(t){"braintree"===t.gateway_type&&h.isGSChallenge(t)&&(this.Challenge=h)}},{key:"start",value:function(){var t=this;this.StatusPolling.withContext(this.transactionToken,this.environmentKey,(function(e){t.installExtensions(e),t.handleUpdate("start",e)}))}},{key:"poll",value:function(t){return this.handleUpdate("polling",t)}},{key:"stopPolling",value:function(){this.poller&&this.poller.stop()}},{key:"installPoller",value:function(t){if(!t)return!1;this.stopPolling(),this.poller=t,this.poller.run()}},{key:"finalize",value:function(t){if(!this.statusManager.recordOnChange("finalize",{state:"finalize"}))return"noop";this.Challenge.run(t,this.transactionToken,this.environmentKey,this.challengeIframeLocation,this.challengeIframeClasses,this.poll,this.finalize,this.installPoller,this.eventPublisher)}},{key:"handleUpdate",value:function(t,e){if(!this.statusManager.recordOnChange(t,e))return"noop";switch("pending|device_fingerprint|braintree"==="".concat(e.state,"|").concat(e.required_action,"|").concat(e.gateway_type)&&(e.required_action="challenge"),"".concat(e.state," & ").concat(e.required_action)){case"pending & redirect":case"pending & fallback":return this.Redirect.run(this,e,this.hiddenIframeLocation),"redirect";case"pending & challenge":return"start"!==t&&"polling"!==t||this.finalize(e),"challenge";case"pending & device_fingerprint":return this.DeviceFingerprint.run(e,this.transactionToken,this.environmentKey,this.hiddenIframeLocation,this.finalize,this.poll,this.installPoller,this.eventPublisher,this.deviceFingerprintTimeoutTask),"device_fingerprint"}return"succeeded"===e.state?(this.stopPolling(),this.event("handleEvent","succeeded",e),"succeeded"):"failed"===e.state||"gateway_processing_failed"===e.state||"gateway_setup_failed"===e.state?(this.stopPolling(),this.error("handleUpdate","Failed to process transaction",e),"failed"):void 0}},{key:"error",value:function(t,e,n){var r={state:n.state,message:n.message,error_code:n.error_code};this.stopPolling(),this.eventPublisher.error(t,e,r)}},{key:"event",value:function(t,e,n){return this.eventPublisher.event(t,e,n)}}]),t}();t.exports=m},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(70),i=n(71),o=n(72);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(u(e),t=s(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(t,o+h)!==l(e,h)){d=!1;break}if(d)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return E(t,e,n,r)}function _(t,e,n,r){return V(z(e),t,n,r)}function x(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,l=t[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return d(null,t)},c.allocUnsafeSlow=function(t){return d(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=t.slice(e,n),d=0;d<s;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=N(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:U(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(69))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),a=r[0],s=r[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[u++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(u(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+t[e+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(e*c-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=p,a/=256,l-=8);t[n+f-p]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=n(74),s=function(){function t(e,n,r,o){(0,i.default)(this,t),this.finalize=e,this.transactionToken=n,this.statusManager=r,this.event=this.event.bind(this),this.error=this.error.bind(this),this.notifier=o||window.Spreedly}return(0,o.default)(t,[{key:"event",value:function(t,e,n,r){return!!this.statusManager.recordOnChange(t,e,a)&&this.notifier.emit("3ds:status",{action:e,context:n,token:this.transactionToken,finalize:this.finalize,response:r})}},{key:"error",value:function(t,e,n){return this.event(t,"error",e,n)}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(e,n,r){(0,i.default)(this,t),this.initiator=e,this.index=n,this.action=r}return(0,o.default)(t,[{key:"getInitiator",value:function(){return this.initiator}},{key:"getIndex",value:function(){return this.index}},{key:"getType",value:function(){return"EventStatus"}},{key:"getAction",value:function(){return this.action}},{key:"diff",value:function(t){return t.getType()!==this.getType()||t.getAction()!==this.action}},{key:"toString",value:function(){return["Type:            ".concat(this.getType()),"Initiator:       ".concat(this.initiator),"Index:           ".concat(this.index),"Action:          ".concat(this.action)].join("\n")}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=n(76),s=function(){function t(){(0,i.default)(this,t),this.statuses=[new a]}return(0,o.default)(t,[{key:"getCurrentStatus",value:function(){return this.statuses[this.statuses.length-1]}},{key:"recordOnChange",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,r=new n(t,this.statuses.length,e),i=0;i<this.statuses.length;i++){var o=this.statuses[i];if(!o.diff(r))return!1}return this.statuses.push(r),!0}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,t),this.initiator=e||"unknown",this.index=n||0,this.state=r.state||"unknown",this.requiredAction=r.required_action||"unknown"}return(0,o.default)(t,[{key:"getInitiator",value:function(){return this.initiator}},{key:"getIndex",value:function(){return this.index}},{key:"getRequiredAction",value:function(){return this.requiredAction}},{key:"getState",value:function(){return this.state}},{key:"getType",value:function(){return"Status"}},{key:"diff",value:function(t){return t.getType()!==this.getType()||t.getState()!==this.state||t.getRequiredAction()!==this.requiredAction}},{key:"toString",value:function(){return["Type:            ".concat(this.getType()),"Initiator:       ".concat(this.initiator),"Index:           ".concat(this.index),"State:           ".concat(this.state),"Required Action: ".concat(this.requiredAction)].join("\n")}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(e,n,r){(0,i.default)(this,t),this.timeInSeconds=e,this.context=n,this.eventPublisher=r}return(0,o.default)(t,[{key:"start",value:function(t){this.eventPublisher.event("CancelableTask","".concat(this.context,"#start"),this),this.task=setTimeout(t,1e3*this.timeInSeconds)}},{key:"stop",value:function(){this.eventPublisher.event("CancelableTask","".concat(this.context,"#stop"),this),this.task&&clearTimeout(this.task)}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=n(79);t.exports={run:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;i(e,n)?t.event("Redirect.run","fallback",e):t.error("Redirect.run","fallback",e)}}},function(t,e,n){"use strict";var r=n(11),i=n(12);t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(!r(e))throw"A DOM id is required for injecting the 3DS 1 fallback";var o=i(t,"checkout_form");if(r(o)&&!/action\=\"\"/.test(o)){n.document.getElementById(e).innerHTML=o;var a=n.document.getElementById(e).getElementsByTagName("form");if(a.length>0)return a[0].submit(),!0}else if(r(t.checkout_url))return n.location=t.checkout_url,!0;return!1}},function(t,e,n){"use strict";var r=n(0),i=r(n(5)),o=r(n(1)),a=r(n(2));function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=n(19),u=n(4),d=function(){function t(){(0,o.default)(this,t)}return(0,a.default)(t,null,[{key:"run",value:function(t,e,n,r,i,o,a,s,d,h,f,p){var m=f||braintree,g=p||l,y=new(h||u)(e,o,(function(t){d.error("Braintree 3DS timeout",t),o(t)}),n,200);d.event("Challenge.run","challenge",t);var v=g.decode(t&&t.three_ds_context),b=c(c({},v.threeDSecureParameters),{},{onLookupComplete:function(t,e){e()}});m.client.create({authorization:v.clientToken},(function(t,e){if(t)return y.stop(),void d.error("Braintree client error",{originalError:t});m.threeDSecure.create({version:"popup"!==r?"2-inline-iframe":2,client:e},(function(t,e){if(t)return y.stop(),void d.error("Braintree 3DS Client error",{originalError:t});"popup"!==r&&e.on("authentication-iframe-available",(function(t,e){document.getElementById(r).appendChild(t.element),e()})),e.verifyCard(b,(function(t,e){if(t)return y.stop(),void d.error("Braintree 3DS Authentication error",{originalError:t});d.event("Braintree 3DS Integration","trigger-completion",{payment_method_nonce:e.nonce})}))}))})),s(y)}},{key:"isGSChallenge",value:function(t){var e=l.decode(t.three_ds_context);return null!==e&&void 0!==e.threeDSecureParameters}}]),t}();t.exports=d},function(t,e,n){"use strict";var r=n(0)(n(5));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=n(12),s=n(4),c=n(21).makeFrameManager;t.exports={run:function(t,e,n,r,i,l,u,d,h,f,p){var m=p||s,g=(f||c)({frameId:"challenge-flow",destination:r,url:t.device_fingerprint_form_embed_url,contents:a(t,"device_fingerprint_form")}),y=g.success,v=g.frameManager;if(y&&v){var b=new m(e,l,(function(e){var n=o(o({},t),e);d.event("DeviceFingerprint polling","trigger-completion",n),l(n)}),n,20);"worldpay"===t.gateway_type?(h.start((function(){return d.error("deviceFingerprintTimeoutTask#start",t)})),window.addEventListener("message",(function(t){!function(t,e,n){var r=null;try{r=JSON.parse(t.data)}catch(e){r=t.data}r&&"profile.completed"===r.MessageType&&(n.stop(),e.event("sendPostMessageWhenTrusted","trigger-completion",r))}(t,d,h)}),!1)):d.event("DeviceFingerprint.run","device-fingerprint",t),u(b)}else d.error("DeviceFingerprint.run",o({step:"device-fingerprint"},t)),u(null)}}},function(t,e,n){"use strict";var r=n(0)(n(5));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=n(83),s=n(4);t.exports={run:function(t,e,n,r,i,c,l,u,d,h,f){var p=h||s,m=f||a,g=null;"pending"!==t.state||"challenge"!==t.required_action?d.error("Challenge.run",{state:t,errors:["Failed to finalize. The transaction is not in the correct state. State should be 'pending' and required action should be 'challenge'"]}):m(t,r,i)?(d.event("Challenge.run","challenge",t),g=new p(e,(function(e){return c(o(o({},t),e))}),(function(){return d.event("Challenge polling","finalization-timeout")}),n,1200)):d.error("Challenge.run",{state:t,errors:["Failed to inject the challenge iframe, is the challengeIframeLocation valid?"]});u(g)}}},function(t,e,n){"use strict";var r=n(0)(n(5));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=n(11),s=n(12),c=n(21).makeFrameManager,l=n(10);t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l;if(!e)throw"A DOM id is required for injecting the challenge form.";var u=s(t,"challenge_form"),d=t.challenge_form_embed_url,h={frameId:"challenge-iframe-".concat(i()),frameManagerClass:r,destination:e,injectOptions:{show:!0,classes:n}},f=null;if(a(d))f=c(o({url:d},h)).frameManager;else if(a(u))f=c(o({contents:u},h)).frameManager;else{if(!a(t.challenge_url))throw"challenge_form and challenge_url are missing. Ensure that one of them is included.";f=c(o({url:t.challenge_url},h)).frameManager}return f}},function(t,e,n){"use strict";var r=n(0),i=r(n(1)),o=r(n(2)),a=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,null,[{key:"initializeBraintreeButtons",value:function(e,n){braintree.client.create({authorization:n.clientToken},(function(r,i){r?console.error("Error creating client: ".concat(r)):(e.paymentElements.paypal&&t.paypalButton(e,i,n),e.paymentElements.venmo&&t.venmoButton(e,i,n))}))}},{key:"shippingAddressParams",value:function(t){if(t.shippingAddress&&t.shippingAddress.shipping_address1&&t.shippingAddress.shipping_city&&t.shippingAddress.shipping_state&&t.shippingAddress.shipping_zip&&t.shippingAddress.shipping_country)return{line1:t.shippingAddress.shipping_address1,city:t.shippingAddress.shipping_city,state:t.shippingAddress.shipping_state,postalCode:t.shippingAddress.shipping_zip,countryCode:t.shippingAddress.shipping_country,line2:t.shippingAddress.shipping_address2||"",phone:t.shippingAddress.shipping_phone_number||"",recipientName:t.shippingAddress.shipping_full_name||""}}},{key:"lineItemsParams",value:function(t){var e=[];return t.lineItems&&t.lineItems.forEach((function(t){if(t.quantity&&t.unit_amount&&t.name&&t.kind){var n={quantity:t.quantity,unitAmount:t.unit_amount/100,name:t.name,kind:t.kind,description:t.description||"",productCode:t.product_code||"",url:t.url||""};t.unit_tax_amount&&(n.unitTaxAmount=t.unit_tax_amount/100),e.push(n)}})),e}},{key:"checkoutFlowParams",value:function(e){var n={flow:"checkout",amount:e.amount,currency:e.currencyCode,intent:"OffsiteSynchronousAuthorization"==e.transactionType?"authorize":"capture"};"checkout_with_vault"==e.paypalFlow&&(n.requestBillingAgreement=!0,e.billingAgreementDescription&&(n.billingAgreementDetails={description:e.billingAgreementDescription}));var r=t.shippingAddressParams(e);r&&(n.shippingAddressOverride=r,n.enableShippingAddress=!0,n.shippingAddressEditable=!1);var i=t.lineItemsParams(e);return i.length&&(n.lineItems=i),n}},{key:"vaultFlowParams",value:function(e){var n={flow:"vault"};e.billingAgreementDescription&&(n.billingAgreementDescription=e.billingAgreementDescription);var r=t.shippingAddressParams(e);return r&&(n.shippingAddressOverride=r,n.enableShippingAddress=!0,n.shippingAddressEditable=!1),n}},{key:"venmoParams",value:function(t,e){var n={client:e,allowDesktop:!0};return t.venmoFlow&&(n.paymentMethodUsage=t.venmoFlow),t.venmoProfileId&&(n.profileId=t.venmoProfileId),n}},{key:"paypalButton",value:function(e,n,r){var i="";function o(n){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s={payment_method_type:"paypal"};function c(t){var e={state:"Successful",nonce:t.nonce,payment_method:s};return"vault"!=r.paypalFlow&&"checkout_with_vault"!=r.paypalFlow||(e.device_data=i),e}if(o={fundingSource:null!=a?a:paypal.FUNDING.PAYPAL,onApprove:function(t){return n.tokenizePayment(t,(function(t,n){e.callbackFunction(c(n))}))},onCancel:function(t){e.callbackFunction({state:"Cancelled",message:"PayPal payment cancelled, ".concat(JSON.stringify(t,null,2)),payment_method:s})},onError:function(t){e.callbackFunction({state:"Failed",message:t,payment_method:s})}},"vault"==r.paypalFlow?o.createBillingAgreement=function(){return n.createPayment(t.vaultFlowParams(r))}:o.createOrder=function(){return n.createPayment(t.checkoutFlowParams(r))},"function"==typeof e.callbackActionButtonFunction&&(o.onInit=function(t,n){e.callbackActionButtonFunction({state:"Initiated",data:t,actions:n})},o.onClick=function(t,n){e.callbackActionButtonFunction({state:"Clicked",data:t,actions:n})}),a){var l,u={},d=null==e||null===(l=e.style)||void 0===l?void 0:l.paypal;u=d?t.stylingButtons("paypal",d):{color:"gold"},o.style=u}return o}"vault"!=r.paypalFlow&&"checkout_with_vault"!=r.paypalFlow||braintree.dataCollector.create({client:n},(function(t,e){t?console.error("Error occured in the creation of data collector: ".concat(t)):i=e.deviceData})),braintree.paypalCheckout.create({client:n},(function(t,n){t?console.error("Error creating PayPal Checkout component: ".concat(t)):n.loadPayPalSDK(function(){var t={};t="vault"==r.paypalFlow?{vault:!0}:{currency:r.currencyCode,intent:"OffsiteSynchronousAuthorization"==r.transactionType?"authorize":"capture"};r.locale&&(t.locale=r.locale);return t}(),(function(){if("checkout"===r.paypalFlow){var t=[paypal.FUNDING.PAYPAL,paypal.FUNDING.PAYLATER];"false"===r.enablePaylaterButton&&t.pop(),t.forEach((function(t){var r=paypal.Buttons(o(n,t));r.isEligible()&&r.render("#".concat(e.paymentElements.paypal))}))}else paypal.Buttons(o(n)).render("#".concat(e.paymentElements.paypal))}))}))}},{key:"stylingButtons",value:function(t,e){if("paypal"==t){var n={min:25,max:55},r={};return["vertical","horizontal"].includes(null==e?void 0:e.layout)&&(r.layout=e.layout),["rect","pill"].includes(null==e?void 0:e.shape)&&(r.shape=e.shape),(null==e?void 0:e.height)>=n.min&&(null==e?void 0:e.height)<=n.max&&(r.height=e.height),["gold","blue","silver","white","black"].includes(null==e?void 0:e.color)&&(r.color=e.color),r}}},{key:"venmoButton",value:function(e,n,r){var i;function o(t,n){e.callbackFunction({state:"Cancelled",message:"VENMO_CANCELED"===t.code?"App is not available or user aborted payment flow":"User canceled payment flow",payment_method:n})}function a(t,n){e.callbackFunction({state:"Failed",message:"An error occurred: ".concat(t.message),payment_method:n})}function s(t,n){e.callbackFunction({state:"Successful",nonce:t.nonce,payment_method:n,device_data:i,username:t.details.username})}braintree.dataCollector.create({client:n,paypal:!0},(function(t,e){t?console.error("Error occured in the creation of data collector: ".concat(t)):i=e.deviceData})),braintree.venmo.create(t.venmoParams(r,n),(function(t,n){if(t)console.error("Error creating Venmo: ".concat(t));else if(n.isBrowserSupported()){var r={payment_method_type:"venmo"};!function(t,n){var r=document.getElementById(e.paymentElements.venmo);r.style.display="block",r.addEventListener("click",(function(){r.disabled=!0,t.tokenize((function(t,e){r.removeAttribute("disabled"),t?"VENMO_CANCELED"===t.code||"VENMO_APP_CANCELED"===t.code||"VENMO_DESKTOP_CANCELED"===t.code?o(t,n):a(t,n):s(e,n)}))}))}(n,r),n.hasTokenizationResult()&&n.tokenize((function(t,e){t?"VENMO_CANCELED"===t.code||"VENMO_APP_CANCELED"===t.code?o(t,r):a(t,r):s(e,r)}))}else console.error("Browser does not support Venmo")}))}}]),t}();t.exports=a}]);